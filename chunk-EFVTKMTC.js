import{a as O}from"./chunk-5JNGWLLX.js";import{a as A}from"./chunk-RCXOM7IG.js";import{C as d,E as x,F as R,H as p,L as a,M as n,N as r,P as g,Q as _,R as l,W as o,X as f,Y as I,_ as D,ga as M,k as w,ka as h,p as b,q as C,s as L,sa as N,ta as V,ua as G,v as c,wa as S,x as v,xa as k,y as T,z as U}from"./chunk-U7YQWJHB.js";var z=()=>["/tarea/create"];function K(t,i){if(t&1){let e=g();a(0,"button",16),_("click",function(){b(e);let m=l();return C(m.cambiarTablaTareas(2))}),o(1,"Por Asignar"),n()}if(t&2){let e=l();R("active",e.component===2)}}function Z(t,i){t&1&&o(0," Terminada ")}function H(t,i){t&1&&o(0," Por terminar ")}function J(t,i){if(t&1){let e=g();a(0,"div",17)(1,"div",19)(2,"div",8)(3,"div",20)(4,"p",21),o(5),n(),a(6,"p",22)(7,"b"),o(8,"Estado:"),n(),d(9,Z,1,0)(10,H,1,0),n(),a(11,"p",22),o(12),n()(),r(13,"div",23),a(14,"div",14)(15,"div",8)(16,"div",24)(17,"button",25),_("click",function(){let m=b(e).$implicit,u=l(3);return C(u.verTareaAsignada(m))}),r(18,"i",26),n()(),r(19,"div",24),a(20,"div",24)(21,"button",25),_("click",function(){let m=b(e).$implicit,u=l(3);return C(u.EliminarTarea(m.Id))}),r(22,"i",27),n()()()()()(),r(23,"br"),n()}if(t&2){let e=i.$implicit;c(5),f(e.NameTarea),c(4),p(e.IsCompleted?9:10),c(3),f(e.DescriptionTarea)}}function Q(t,i){if(t&1&&d(0,J,24,3,"div",18),t&2){let e=l(2);x("ngForOf",e.tareas)}}function W(t,i){if(t&1&&d(0,Q,1,1,"div",17),t&2){let e=l();p(e.tareas&&e.tareas.length>0?0:-1)}}function X(t,i){t&1&&o(0," Terminada ")}function Y(t,i){t&1&&o(0," Por terminar ")}function ee(t,i){if(t&1){let e=g();a(0,"div",17)(1,"div",19)(2,"div",8)(3,"div",20)(4,"p",21),o(5),n(),a(6,"p",22)(7,"b"),o(8,"Usuario:"),n(),o(9),n(),a(10,"p",22)(11,"b"),o(12,"Estado:"),n(),d(13,X,1,0)(14,Y,1,0),n(),a(15,"p",22),o(16),n()(),r(17,"div",23),a(18,"div",14)(19,"div",8),r(20,"div",24)(21,"div",24),a(22,"div",24)(23,"button",25),_("click",function(){let m=b(e).$implicit,u=l(4);return C(u.eliminarAsignacionTarea(m.Id))}),r(24,"i",27),n()()()()()(),r(25,"br"),n()}if(t&2){let e=i.$implicit;c(5),f(e.NameTarea),c(4),I(" ",e.NameUsuario,""),c(4),p(e.IsCompleted?13:14),c(3),f(e.DescriptionTarea)}}function te(t,i){if(t&1&&d(0,ee,26,4,"div",18),t&2){let e=l(3);x("ngForOf",e.tareasAsignadas)}}function ie(t,i){if(t&1&&d(0,te,1,1,"div",17),t&2){let e=l(2);p(e.tareas&&e.tareasAsignadas.length>0?0:-1)}}function ne(t,i){t&1&&o(0," Terminada ")}function ae(t,i){t&1&&o(0," Por terminar ")}function oe(t,i){if(t&1){let e=g();a(0,"div",17)(1,"div",19)(2,"div",8)(3,"div",20)(4,"p",21),o(5),n(),a(6,"p",22)(7,"b"),o(8,"Descripcion:"),n(),o(9),n(),a(10,"p",22)(11,"b"),o(12,"Estado:"),n(),d(13,ne,1,0)(14,ae,1,0),n()(),r(15,"div",23),a(16,"div",14)(17,"div",8),r(18,"div",24)(19,"div",24),a(20,"div",24)(21,"button",25),_("click",function(){let m=b(e).$implicit,u=l(4);return C(u.checkTareacompletada(m.Id))}),r(22,"i",26),n()()()()()(),r(23,"br"),n()}if(t&2){let e=i.$implicit;c(5),f(e.NameTarea),c(4),I(" ",e.NameTarea,""),c(4),p(e.IsCompleted?13:14)}}function re(t,i){if(t&1&&d(0,oe,24,3,"div",18),t&2){let e=l(3);x("ngForOf",e.asignacionTareaUsuario)}}function se(t,i){if(t&1&&d(0,re,1,1,"div",17),t&2){let e=l(2);p(e.tareas&&e.asignacionTareaUsuario.length>0?0:-1)}}function ce(t,i){if(t&1&&d(0,ie,1,1)(1,se,1,1),t&2){let e=l();p(e.idRol==1?0:1)}}var E=class t{constructor(i,e,s){this.backService=i;this.router=e;this.auth=s;this.initialStates()}event=new L;eventAsignacion=new L;idRol=0;component=1;tareas=[];tareasAsignadas=[];asignacionTareaUsuario=[];tareaserviceSubscription;tareaAsignadasserviceSubscription;tareaUsuarioserviceSubscription;initialStates(){this.idRol=this.auth.getCookies()?.IdRol,this.idRol==1?(this.tareaserviceSubscription=this.backService.currentTareas.subscribe(i=>{this.tareas=i}),this.tareaAsignadasserviceSubscription=this.backService.currentTareasAsingnadas.subscribe(i=>{this.tareasAsignadas=i})):this.tareaUsuarioserviceSubscription=this.backService.currentTareasUsuario.subscribe(i=>{this.asignacionTareaUsuario=i})}ngOnDestroy(){this.tareaserviceSubscription?.unsubscribe(),this.tareaAsignadasserviceSubscription?.unsubscribe()}checkTareacompletada(i){this.backService.loadingOn();let e={};e.IdTarea=i,e.IsCompleted=!0,this.backService.checkTareaCompletada(e).subscribe({next:s=>{this.event.emit()},error:s=>{}})}EliminarTarea(i){this.backService.EliminarTarea(i).subscribe({next:e=>{this.event.emit()},error:e=>{}})}cambiarTablaTareas(i){this.component=i}eliminarAsignacionTarea(i){this.backService.EliminarAsignacionTarea(i).subscribe({next:e=>{this.eventAsignacion.emit()},error:e=>{}})}verTareaAsignada(i){this.backService.setCurrentTareasinAsignar(i),this.backService.setCurrentIsTareasinAsignar(!1),this.router.navigate(["tarea/editarTarea"])}static \u0275fac=function(e){return new(e||t)(v(A),v(N),v(k))};static \u0275cmp=T({type:t,selectors:[["app-list"]],outputs:{event:"event",eventAsignacion:"eventAsignacion"},decls:21,vars:4,consts:[[1,"row","container"],[1,"container","mt-4"],[1,"banner"],[1,"banner-overlay"],[1,"banner-content"],[1,"fw-bold"],["routerLinkActive","router-link-active",1,"btn","btn-light","mt-2",3,"routerLink"],[1,"bi","bi-calendar-plus","text-primary"],[1,"row"],[1,"col-lg-4","col-md-3","col-ms-3"],[1,"col-lg-6","col-md-7","col-ms-7"],["aria-label","Basic mixed styles example",1,"btn-group","mt-4"],["type","button",1,"btn","border-primary","btn-primary","rounded-start-pill",3,"click"],["type","button",1,"btn","border-primary","btn-light","rounded-end-pill",3,"active"],[1,"col-lg-3","col-md-2","col-ms-2"],[1,"row","mt-4","user-list-container"],["type","button",1,"btn","border-primary","btn-light","rounded-end-pill",3,"click"],[1,"list-group"],["class","list-group",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action"],[1,"col-lg-7","col-md-8","col-ms-8","text-left"],[1,"text-capitalize","fs-3","fw-semibold"],[1,"text-body-light"],[1,"col-lg-2","col-md-1","col-ms-1"],[1,"col-md-1","col-lg-1"],[1,"btn","btn-outline-primary","text-primary",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-trash"]],template:function(e,s){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),r(3,"div",3),a(4,"div",4)(5,"h2",5),o(6,"Tareas"),n(),a(7,"a",6),r(8,"i",7),o(9," Nueva Tarea "),n()()()(),a(10,"div",8),r(11,"div",9),a(12,"div",10)(13,"div",11)(14,"button",12),_("click",function(){return s.cambiarTablaTareas(1)}),o(15,"Asignadas"),n(),d(16,K,2,2,"button",13),n()(),r(17,"div",14),n(),a(18,"div",15),d(19,W,1,1)(20,ce,2,1),n()()),e&2&&(c(7),x("routerLink",D(3,z)),c(9),p(s.idRol==1?16:-1),c(3),p(s.component==2?19:20))},dependencies:[M,S,V,G],styles:['.banner[_ngcontent-%COMP%]{position:relative;background:url("./media/app-para-lista-de-tareas-57KZN4CT.jpg") center/cover no-repeat;border-radius:15px;height:200px;color:#fff;display:flex;align-items:center;padding:20px}.banner-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0006;border-radius:15px}.banner-content[_ngcontent-%COMP%]{position:relative;z-index:2}']})};var y=class t{constructor(i,e){this.backService=i;this.auth=e;this.auth.getCookies()?.IdRol==1?(this.GetTareas(),this.GetTareasAsignadas()):this.GetTareasAsignadasUsuario()}GetTareas(){this.backService.GetAllTareas().subscribe({next:i=>{this.backService.setCurrentTareas(i)},error:i=>{}})}GetTareasAsignadas(){this.backService.GetAllTareasAsignadas().subscribe({next:i=>{this.backService.setCurrentTareasAsignadas(i)},error:i=>{}})}GetTareasAsignadasUsuario(){let i=this.auth.getCookies()?.IdUsuario;this.backService.GetTareasUsuario(i).subscribe({next:e=>{this.backService.setCurrentTareasUsuario(e)},error:e=>{}})}UpdataLista(){this.auth.getCookies()?.IdRol==1?this.GetTareas():this.GetTareasAsignadasUsuario()}UpdateAsignacionTareas(){this.GetTareasAsignadas()}static \u0275fac=function(e){return new(e||t)(v(A),v(k))};static \u0275cmp=T({type:t,selectors:[["app-dashboard"]],decls:4,vars:0,consts:[[1,"d-flex"],[1,"p-4"],[3,"event","eventAsignacion"]],template:function(e,s){e&1&&(a(0,"div",0),r(1,"app-menu"),a(2,"div",1)(3,"app-list",2),_("event",function(){return s.UpdataLista()})("eventAsignacion",function(){return s.UpdateAsignacionTareas()}),n()()())},dependencies:[E,h,O],encapsulation:2})};var P=[{path:"",component:y}];var j=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=U({type:t});static \u0275inj=w({imports:[h,S.forChild(P)]})};export{j as DashboardModule};
