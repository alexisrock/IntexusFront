import{a as M,b as u,c as G,d as V,e as D,f as C,g as q,h as A,i as O,m as j,n as $}from"./chunk-MWEV3KEI.js";import{a as z}from"./chunk-5JNGWLLX.js";import{a as B}from"./chunk-6LNUWW6M.js";import{C as d,E as p,H as E,L as o,M as l,N as n,P as S,Q as T,R as f,W as m,X as y,Y as w,ga as N,ha as R,k as I,ka as v,p as x,q as h,v as r,wa as k,x as b,xa as g,y as F,z as L}from"./chunk-U7YQWJHB.js";function J(e,i){if(e&1){let t=S();o(0,"div",2)(1,"div",4)(2,"div",5)(3,"div",6)(4,"p",7),m(5),l(),o(6,"p",8)(7,"b"),m(8,"Tel:"),l(),m(9),l(),o(10,"p",8),m(11),l()(),n(12,"div",9),o(13,"div",10)(14,"div",5),n(15,"div",11),o(16,"div",11)(17,"button",12),T("click",function(){let s=x(t).$implicit,a=f(3);return h(a.Eliminar(s.Id))}),n(18,"i",13),l()()()()()()()}if(e&2){let t=i.$implicit;r(5),y(t.Email),r(4),w(" ",t.Telefono,""),r(2),y(t.Comentario)}}function K(e,i){if(e&1&&d(0,J,19,3,"div",3),e&2){let t=f(2);p("ngForOf",t.contactos)}}function Q(e,i){if(e&1&&d(0,K,1,1,"div",2),e&2){let t=f();E(t.contactos&&t.contactos.length>0?0:-1)}}function U(e,i){if(e&1&&(o(0,"div",28),m(1),l()),e&2){let t=f(2);r(),w(" ",t.message," ")}}function W(e,i){e&1&&(o(0,"div",29),m(1," El Telefono es obligatorio. "),l())}function X(e,i){e&1&&(o(0,"div",29),m(1," El correo es obligatorio. "),l())}function Y(e,i){e&1&&(o(0,"div",29),m(1," El Comentarios es obligatorio. "),l())}function Z(e,i){if(e&1){let t=S();o(0,"div",14)(1,"h2"),m(2,"Crear Contacto"),l()(),n(3,"br")(4,"br"),o(5,"form",15),T("submit",function(){x(t);let s=f();return h(s.sendForm())}),o(6,"div",16),n(7,"div",10),o(8,"div",17),d(9,U,2,1,"div",18),l(),n(10,"div",10),l(),o(11,"div",16),n(12,"div",19),o(13,"div",20),n(14,"input",21),l(),d(15,W,2,0,"div",22),n(16,"div",19),l(),n(17,"br"),o(18,"div",16),n(19,"div",19),o(20,"div",20),n(21,"input",23),l(),d(22,X,2,0,"div",22),n(23,"div",19),l(),n(24,"br"),o(25,"div",16),n(26,"div",19),o(27,"div",20),n(28,"textarea",24),l(),d(29,Y,2,0,"div",22),n(30,"div",19),l(),o(31,"div",25),n(32,"div",19),o(33,"div",26),n(34,"input",27),l(),n(35,"div",19),l()()}if(e&2){let t,c,s,a=f();r(5),p("formGroup",a.fg),r(4),p("ngIf",a.loading),r(6),p("ngIf",((t=a.fg.get("Telefono"))==null?null:t.invalid)&&((t=a.fg.get("Telefono"))==null?null:t.touched)),r(7),p("ngIf",((c=a.fg.get("Email"))==null?null:c.invalid)&&((c=a.fg.get("Email"))==null?null:c.touched)),r(7),p("ngIf",((s=a.fg.get("Comentarios"))==null?null:s.invalid)&&((s=a.fg.get("Comentarios"))==null?null:s.touched))}}var _=class e{constructor(i,t){this.service=i;this.auth=t;this.idRol=this.auth.getCookies()?.IdRol,this.GetContactos(),this.idRol!=1&&this.updateDatos()}contactos=[];idRol=0;fg;loading=!1;message="";updateDatos(){this.fg=new D({Telefono:new C("",[u.required]),Email:new C("",[u.required,u.email]),Comentarios:new C("",[u.required])})}GetContactos(){this.service.GetContactos().subscribe({next:i=>{this.contactos=i},error:i=>{}})}Eliminar(i){this.service.EliminarContacto(i).subscribe({next:t=>{this.GetContactos()},error:t=>{}})}sendForm(){if(this.fg.valid){this.service.loadingOn();let i={};i.Comentario=this.fg.get("Comentarios")?.value,i.Email=this.fg.get("Email")?.value,i.Telefono=this.fg.get("Telefono")?.value,this.service.CrearContacto(i).subscribe({next:t=>{this.showMessage(t.message),this.fg.reset()},error:t=>{}})}}showMessage(i){this.service.loadingOff(),this.loading=!0,this.message=i,setTimeout(()=>{this.message="",this.loading=!1},6e3)}static \u0275fac=function(t){return new(t||e)(b(B),b(g))};static \u0275cmp=F({type:e,selectors:[["app-listcontacto"]],decls:6,vars:1,consts:[[1,"d-flex"],[1,"p-4"],[1,"list-group"],["class","list-group",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action"],[1,"row"],[1,"col-lg-7","col-md-8","col-ms-8","text-left"],[1,"text-capitalize","fs-3","fw-semibold"],[1,"text-body-light"],[1,"col-lg-2","col-md-1","col-ms-1"],[1,"col-lg-3","col-md-2","col-ms-2"],[1,"col-md-1","col-lg-1"],[1,"btn","btn-outline-primary","text-primary",3,"click"],[1,"bi","bi-trash"],[1,"fondoTitulos"],[3,"submit","formGroup"],[1,"row","mt-2","p-2"],[1,"col-lg-7","col-md-8","col-ms-8"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"col-lg-1","col-md-1","col-ms-1"],[1,"col-lg-10","col-md-10","col-ms-10","border-bottom","border-black"],["type","text","formControlName","Telefono","placeholder","Telefono",1,"form-control-plaintext","text-dark"],["class","colorRed",4,"ngIf"],["type","text","formControlName","Email","placeholder","Email",1,"form-control-plaintext","text-dark"],["formControlName","Comentarios","placeholder","Comentarios",1,"form-control-plaintext","text-dark"],[1,"row","mt-4","mb-4","p-2"],[1,"col-lg-10","col-md-10","col-ms-10"],["type","submit","value","Crear",1,"btn","btn-primary","rounded-pill"],["role","alert",1,"alert","alert-success"],[1,"colorRed"]],template:function(t,c){t&1&&(o(0,"div",0),n(1,"app-menu"),o(2,"div",1),d(3,Q,1,1)(4,Z,36,5),l()(),n(5,"app-loadding")),t&2&&(r(3),E(c.idRol==1?3:4))},dependencies:[v,N,R,j,q,M,G,V,A,O,z,$],encapsulation:2})};var tt=[{path:"contactos",canActivate:[g],component:_}],P=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=L({type:e});static \u0275inj=I({imports:[v,k.forChild(tt)]})};export{P as ContactomoduleModule,tt as routes};
