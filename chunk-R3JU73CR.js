import{a as k,b as f,c as F,d as T,e as D,f as g,g as P,h as G,i as A,j as ne,k as ae,l as le,m as V,n as q}from"./chunk-NB6UCPK5.js";import{a as x}from"./chunk-FXXYGI6V.js";import{a as E}from"./chunk-67DE72J3.js";import{C as c,E as d,H as Q,I as W,J as X,K as Y,L as i,M as o,N as t,P as Z,Q as C,R as _,S as ee,W as l,X as w,Y as y,_ as te,ga as ie,ha as N,k as J,ka as h,p as z,q as H,sa as R,ta as oe,ua as re,v as s,wa as I,x as b,xa as M,y as u,z as K}from"./chunk-U7YQWJHB.js";var pe=()=>["/usuario/create"];function ce(n,e){n&1&&l(0,"Administrador")}function ue(n,e){n&1&&l(0,"Usuario")}function fe(n,e){n&1&&l(0," Sin rol ")}function ve(n,e){if(n&1){let r=Z();i(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"p",16),l(5),o(),i(6,"p",17)(7,"b"),l(8,"rol: "),o(),c(9,ce,1,0)(10,ue,1,0)(11,fe,1,0),o()(),t(12,"div",18),i(13,"div",19)(14,"div",14)(15,"div",20)(16,"button",21),C("click",function(){let m=z(r).$implicit,p=_();return H(p.editarUsuario(m))}),t(17,"i",22),o()(),t(18,"div",20),i(19,"div",20)(20,"button",21),C("click",function(){let m=z(r).$implicit,p=_();return H(p.eliminarUsuario(m.Id))}),t(21,"i",23),o()()()()()(),t(22,"br"),o()}if(n&2){let r,a=e.$implicit;s(5),w(a.NameUsuario),s(4),Q((r=a.Idrol)===1?9:r===2?10:11)}}var O=class n{constructor(e,r){this.service=e;this.router=r;this.getAllUsers()}usuarios=[];getAllUsers(){this.service.GetAllusuarios().subscribe({next:e=>{this.usuarios=e},error:e=>{}})}eliminarUsuario(e){this.service.EliminarUsuario(e).subscribe({next:r=>{this.getAllUsers()},error:r=>{}})}editarUsuario(e){this.service.setCurrentUsuarioResponse(e),this.router.navigate(["usuario/editar"])}static \u0275fac=function(r){return new(r||n)(b(E),b(R))};static \u0275cmp=u({type:n,selectors:[["app-usuarios"]],decls:16,vars:3,consts:[[1,"d-flex"],[1,"p-4","ancho"],[1,"row","container"],[1,"container","mt-4"],[1,"bannerdos"],[1,"banner-overlaydos"],[1,"banner-contentdos"],[1,"fw-bold"],["routerLinkActive","router-link-active",1,"btn","btn-light","mt-2",3,"routerLink"],[1,"bi","bi-person-fill-add","text-primary"],[1,"user-list-container"],["class","list-group  ",4,"ngFor","ngForOf"],[1,"list-group"],[1,"list-group-item","list-group-item-action"],[1,"row"],[1,"col-lg-7","col-md-8","col-ms-8","text-left"],[1,"text-capitalize","fs-3","fw-semibold"],[1,"text-body-light"],[1,"col-lg-2","col-md-1","col-ms-1"],[1,"col-lg-3","col-md-2","col-ms-2"],[1,"col-md-1","col-lg-1"],[1,"btn","btn-outline-primary","text-primary",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-trash"]],template:function(r,a){r&1&&(i(0,"div",0),t(1,"app-menu"),i(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t(6,"div",5),i(7,"div",6)(8,"h2",7),l(9,"Usuarios"),o(),i(10,"a",8),t(11,"i",9),l(12," Nuevo Usuario "),o()()()()(),t(13,"br"),i(14,"div",10),c(15,ve,23,2,"div",11),o()()()),r&2&&(s(10),d("routerLink",te(2,pe)),s(5),d("ngForOf",a.usuarios))},dependencies:[ie,x,I,oe,re],styles:['.bannerdos[_ngcontent-%COMP%]{position:relative;background:url("./media/Usuarios-Redes-Sociales-RHFEIG3N.jpg") center/cover no-repeat;border-radius:15px;height:200px;color:#fff;display:flex;align-items:center;padding:20px}.banner-overlaydos[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0006;border-radius:15px}.banner-contentdos[_ngcontent-%COMP%]{position:relative;z-index:2}.ancho[_ngcontent-%COMP%]{width:80vw}']})};function Ce(n,e){if(n&1&&(i(0,"div",13),l(1),o()),n&2){let r=_();s(),y(" ",r.message," ")}}function _e(n,e){n&1&&(i(0,"div",14),l(1," El nombre es obligatorio. "),o())}function he(n,e){n&1&&(i(0,"div",14),l(1," El correo es obligatorio. "),o())}function Ee(n,e){n&1&&(i(0,"div",14),l(1," El password es obligatorio. "),o())}var S=class n{constructor(e){this.service=e;this.updateDatos()}fg;loading=!1;message="";updateDatos(){this.fg=new D({Nombres:new g("",[f.required]),Email:new g("",[f.required,f.email]),Password:new g("",[f.required])})}sendForm(){if(this.fg.valid){this.service.loadingOn();let e={};e.NameUsuario=this.fg.get("Nombres")?.value,e.Email=this.fg.get("Email")?.value,e.Password=btoa(this.fg.get("Password")?.value),this.service.crearUsuario(e).subscribe({next:r=>{this.showMessage(r.message),this.fg.reset()},error:r=>{this.showMessage(r.error)}})}}showMessage(e){this.service.loadingOff(),this.loading=!0,this.message=e,setTimeout(()=>{this.message="",this.loading=!1},6e3)}static \u0275fac=function(r){return new(r||n)(b(E))};static \u0275cmp=u({type:n,selectors:[["app-usuario"]],decls:32,vars:5,consts:[[3,"submit","formGroup"],[1,"row","mt-2","p-2"],[1,"col-lg-3","col-md-2","col-ms-2"],[1,"col-lg-7","col-md-8","col-ms-8"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"col-lg-7","col-md-8","col-ms-8","border-bottom","border-black"],["type","Nombres","formControlName","Nombres","placeholder","Nombres",1,"form-control-plaintext","text-dark"],["class","colorRed",4,"ngIf"],["type","text","formControlName","Email","placeholder","Email",1,"form-control-plaintext","text-dark"],["type","password","formControlName","Password","placeholder","Password",1,"form-control-plaintext","text-dark"],[1,"col-lg-3","col-md-3","col-ms-2"],[1,"row","mt-4","mb-4","p-2"],["type","submit","value","Crear",1,"btn","btn-primary","rounded-pill"],["role","alert",1,"alert","alert-success"],[1,"colorRed"]],template:function(r,a){if(r&1&&(i(0,"form",0),C("submit",function(){return a.sendForm()}),i(1,"div",1),t(2,"div",2),i(3,"div",3),c(4,Ce,2,1,"div",4),o(),t(5,"div",2),o(),i(6,"div",1),t(7,"div",2),i(8,"div",5),t(9,"input",6),o(),c(10,_e,2,0,"div",7),t(11,"div",2),o(),t(12,"br"),i(13,"div",1),t(14,"div",2),i(15,"div",5),t(16,"input",8),o(),c(17,he,2,0,"div",7),t(18,"div",2),o(),t(19,"br"),i(20,"div",1),t(21,"div",2),i(22,"div",5),t(23,"input",9),o(),c(24,Ee,2,0,"div",7),t(25,"div",10),o(),i(26,"div",11),t(27,"div",2),i(28,"div",3),t(29,"input",12),o(),t(30,"div",10),o()(),t(31,"app-loadding")),r&2){let m,p,v;d("formGroup",a.fg),s(4),d("ngIf",a.loading),s(6),d("ngIf",((m=a.fg.get("Nombres"))==null?null:m.invalid)&&((m=a.fg.get("Nombres"))==null?null:m.touched)),s(7),d("ngIf",((p=a.fg.get("Email"))==null?null:p.invalid)&&((p=a.fg.get("Email"))==null?null:p.touched)),s(7),d("ngIf",((v=a.fg.get("Password"))==null?null:v.invalid)&&((v=a.fg.get("Password"))==null?null:v.touched))}},dependencies:[h,N,V,P,k,F,T,G,A,q],encapsulation:2})};var j=class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=u({type:n,selectors:[["app-registrar-usuario"]],decls:12,vars:0,consts:[[1,"container","text-center"],[1,"row"],[1,"col","col-2"],[1,"col"],[1,"card","text-bg-light","mt-5"],[1,"card-body"],[1,"row","mt-4","p-2"]],template:function(r,a){r&1&&(i(0,"div",0)(1,"div",1),t(2,"div",2),i(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),l(8,"Usuario"),o()(),t(9,"br")(10,"app-usuario"),o()()(),t(11,"div",2),o()())},dependencies:[S],encapsulation:2})};var L=class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=u({type:n,selectors:[["app-create"]],decls:9,vars:0,consts:[[1,"d-flex"],[1,"p-4"],[1,"fondoTitulos"]],template:function(r,a){r&1&&(i(0,"div",0),t(1,"app-menu"),i(2,"div",1)(3,"div",2)(4,"h2"),l(5,"Crear Usuario"),o()(),t(6,"br")(7,"br")(8,"app-usuario"),o()())},dependencies:[x,S],encapsulation:2})};function xe(n,e){if(n&1&&(i(0,"div",22),l(1),o()),n&2){let r=_();s(),y(" ",r.message," ")}}function Se(n,e){n&1&&(i(0,"div",23),l(1," El nombre es obligatorio. "),o())}function Ue(n,e){n&1&&(i(0,"div",23),l(1," El correo es obligatorio. "),o())}function we(n,e){n&1&&(i(0,"div",23),l(1," El password es obligatorio. "),o())}function ye(n,e){if(n&1&&(i(0,"option",16),l(1),o()),n&2){let r=e.$implicit;ee("value",r.Id),s(),w(r.Description)}}var $=class n{constructor(e,r){this.service=e;this.router=r;this.initialComponentes()}userRsponseSubscription;fg;loading=!1;message="";listRol=[];idUser=0;initialComponentes(){this.fg=new D({Nombres:new g("",[f.required]),Email:new g("",[f.required]),Password:new g("",[f.required]),Rol:new g("",[f.required])}),this.userRsponseSubscription=this.service.currentUsuarioResponse.subscribe(e=>{e.Id?(this.fg.patchValue({Nombres:e.NameUsuario,Email:e.Email}),this.idUser=e.Id):this.router.navigate(["usuario/usuarios"])}),this.service.GetRoles().subscribe({next:e=>{this.listRol=e},error:e=>{}})}sendForm(){if(this.fg.valid){let e={};e.Id=this.idUser,e.Email=this.fg.get("Email")?.value,e.NameUsuario=this.fg.get("Nombres")?.value,e.Idrol=this.fg.get("Rol")?.value,e.Password=btoa(this.fg.get("Password")?.value),this.service.EditarUsuario(e).subscribe({next:r=>{this.showMessage(r.message)},error:r=>{this.showMessage(r.message)}})}}showMessage(e){this.service.loadingOff(),this.loading=!0,this.message=e,setTimeout(()=>{this.message="",this.loading=!1},6e3)}static \u0275fac=function(r){return new(r||n)(b(E),b(R))};static \u0275cmp=u({type:n,selectors:[["app-editar-usuario"]],decls:49,vars:5,consts:[[1,"d-flex"],[1,"p-4"],[1,"fondoTitulos"],[3,"submit","formGroup"],[1,"row","mt-2","p-2"],[1,"col-lg-1","col-md-1","col-ms-1"],[1,"col-lg-10","col-md-10","col-ms-10"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"row","mt-2"],[1,"col-lg-10","col-md-10","col-ms-10","border-bottom","border-black"],["type","Nombres","formControlName","Nombres","placeholder","Nombres",1,"form-control-plaintext","text-dark"],["class","colorRed",4,"ngIf"],["type","text","formControlName","Email","placeholder","Email",1,"form-control-plaintext","text-dark"],["type","password","formControlName","Password","placeholder","Password",1,"form-control-plaintext","text-dark"],["formControlName","Rol","aria-label","Default select example",1,"form-select","form-control-plaintext"],["selected","","value",""],[3,"value"],[1,"row","mt-4","mb-4","p-2"],[1,"col-lg-3","col-md-2","col-ms-2"],[1,"col-lg-7","col-md-8","col-ms-8"],["type","submit","value","Guardar",1,"btn","btn-primary","rounded-pill"],[1,"col-lg-3","col-md-3","col-ms-2"],["role","alert",1,"alert","alert-success"],[1,"colorRed"]],template:function(r,a){if(r&1&&(i(0,"div",0),t(1,"app-menu"),i(2,"div",1)(3,"div",2)(4,"h2"),l(5,"Editar Usuario"),o()(),t(6,"br")(7,"br"),i(8,"form",3),C("submit",function(){return a.sendForm()}),i(9,"div",4),t(10,"div",5),i(11,"div",6),c(12,xe,2,1,"div",7),o(),t(13,"div",5),o(),i(14,"div",8),t(15,"div",5),i(16,"div",9),t(17,"input",10),o(),c(18,Se,2,0,"div",11),t(19,"div",5),o(),t(20,"br"),i(21,"div",8),t(22,"div",5),i(23,"div",9),t(24,"input",12),o(),c(25,Ue,2,0,"div",11),t(26,"div",5),o(),t(27,"br"),i(28,"div",8),t(29,"div",5),i(30,"div",9),t(31,"input",13),o(),c(32,we,2,0,"div",11),t(33,"div",5),o(),i(34,"div",8),t(35,"div",5),i(36,"div",9)(37,"select",14)(38,"option",15),l(39,"Seleccione un rol"),o(),X(40,ye,2,2,"option",16,W),o()(),t(42,"div",5),o(),i(43,"div",17),t(44,"div",18),i(45,"div",19),t(46,"input",20),o(),t(47,"div",21),o()(),t(48,"app-loadding"),o()()),r&2){let m,p,v;s(8),d("formGroup",a.fg),s(4),d("ngIf",a.loading),s(6),d("ngIf",((m=a.fg.get("Nombres"))==null?null:m.invalid)&&((m=a.fg.get("Nombres"))==null?null:m.touched)),s(7),d("ngIf",((p=a.fg.get("Email"))==null?null:p.invalid)&&((p=a.fg.get("Email"))==null?null:p.touched)),s(7),d("ngIf",((v=a.fg.get("Password"))==null?null:v.invalid)&&((v=a.fg.get("Password"))==null?null:v.touched)),s(8),Y(a.listRol)}},dependencies:[h,N,x,V,P,ae,le,k,ne,F,T,G,A,q],encapsulation:2})};var Ne=[{path:"",component:j},{path:"usuarios",canActivate:[M],component:O},{path:"create",canActivate:[M],component:L},{path:"editar",canActivate:[M],component:$}],me=class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=K({type:n});static \u0275inj=J({imports:[h,I.forChild(Ne)]})};export{me as UsuarioModule,Ne as routes};
